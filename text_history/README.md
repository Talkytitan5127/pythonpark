История измения текста
======================

Нужно реализовать класс `TextHistory`, который хранит текст и историю его изменений.
Поддерживается три типа изменений — вставка текста (insert),
замена текста (replace) и удаление (delete).

Интерфейс:
* `h.text` — текущий текст, read only
* `h.version` — текущая версия, read only. Начинается с 0 и только растет.
* `h.insert(text, pos=pos)` — вставить текст с позиции pos (по умолчанию — конец строки).
Кидает ValueError, если указана недопустимая позиция. Возвращает номер новой версии.
* `h.replace(text, pos=pos)` — заменить текст с позиции pos (по умолчанию — конец строки).
Кидает ValueError, если указана недопустимая позиция. Замена за пределами строки работает как 
вставка (т. е. текст дописывается). Возвращает номер новой версии.
* `h.delete(pos, length)` — удаляет `length` символов начиная с позиции `pos`.
Возвращает номер новой версии.
* `h.action(action)` — применяет действие `action` (см. ниже). Возвращает номер новой версии.
Версия растет не на 1, а устанавливается та, которая указана в `action`.
* `h.get_actions(from_version=v1, to_version=v2)` — возвращает `list` всех действий
между двумя версиями.

Действия
--------

Действия выражаются наследниками `Action`: `InsertAction`, `ReplaceAction` и `DeleteAction`.
Конструктор принимает позицию (`pos`) и строку (`text`) или позицию и длину (`length`),
а так же стартовую и конечную версию.
Если версии указаны неверно, кидается ValueError. 
Единственный публичный метод `apply` принимает строку и возвращает модифицированную строку.


Оптимизации
-----------

Метод `get_actions` должен уметь применять к полученному списку оптимизации, которые 
сокращают количество действий. Например, очевидно, что последовательные `insert('x', pos=42)`
и `insert('y', pos=43)` можно заменить на `insert('xy', pos=42)`.

Тестов на это нет, надо придумать минимум две любые оптимизации и реализовать.

Merge для метода `insert`:
1) `insert('x', pos=42)`, `insert('y', 43)` --> `insert('xy', pos=42)`
2) `insert('x')`, `insert('y')`, `insert('z')` --> `insert('xyz')`
3) `h.insert('abcd qwe')`, `h.insert('gg', pos=2)` --> `insert('abggcd qwe')`

Merge для метода `replace`:
Пример для обдумывания:
1) `replace('xyz', pos=2)`, `replace('X', pos=2)` --> `replace('Xyz', pos=2)`
2) `replace('xyz', pos=4)`, `replace('QWR', pos=4)` --> `replace('xyQWR', pos=2)`

Merge для метода `delete`:
1) `delete(pos=1, length=2)`, `replace(pos=3, length=1)` --> `replace(pos=1, length=3)`
